<div class="dashboard-container">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Loading dashboard...</p>
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!isLoading" class="dashboard-content">
    <!-- Welcome Header -->
    <div class="welcome-header">
      <div>
        <h1 class="dashboard-title">Welcome back, {{ getUserDisplayName() }}!</h1>
        <p class="dashboard-subtitle">{{ getUserRole() }} Dashboard</p>
      </div>
    </div>

    <!-- Admin/Staff Dashboard -->
    <div *ngIf="isAdmin() || isStaff()" class="admin-dashboard">
      <!-- Statistics Cards -->
      <div class="stats-grid">
        <!-- Total Students Card -->
        <mat-card class="stat-card students-card">
          <div class="stat-content">
            <div class="stat-icon">
              <mat-icon>school</mat-icon>
            </div>
            <div class="stat-details">
              <p class="stat-label">Total Students</p>
              <h2 class="stat-value">{{ stats.totalStudents }}</h2>
            </div>
          </div>
        </mat-card>

        <!-- Total Teachers Card -->
        <mat-card class="stat-card teachers-card">
          <div class="stat-content">
            <div class="stat-icon">
              <mat-icon>person</mat-icon>
            </div>
            <div class="stat-details">
              <p class="stat-label">Total Teachers</p>
              <h2 class="stat-value">{{ stats.totalTeachers }}</h2>
            </div>
          </div>
        </mat-card>

        <!-- Today's Attendance Card -->
        <mat-card class="stat-card attendance-card">
          <div class="stat-content">
            <div class="stat-icon">
              <mat-icon>how_to_reg</mat-icon>
            </div>
            <div class="stat-details">
              <p class="stat-label">Today's Attendance</p>
              <h2 class="stat-value">{{ stats.todayAttendance.percentage.toFixed(1) }}%</h2>
              <p class="stat-subtext">
                {{ stats.todayAttendance.present }} / {{ stats.todayAttendance.total }} present
              </p>
            </div>
          </div>
        </mat-card>

        <!-- Fee Collection Card -->
        <mat-card class="stat-card fees-card">
          <div class="stat-content">
            <div class="stat-icon">
              <mat-icon>payment</mat-icon>
            </div>
            <div class="stat-details">
              <p class="stat-label">Fee Collection</p>
              <h2 class="stat-value">{{ stats.feeCollection.percentage.toFixed(1) }}%</h2>
              <p class="stat-subtext">
                ${{ stats.feeCollection.collected.toLocaleString() }} collected
              </p>
            </div>
          </div>
        </mat-card>
      </div>

      <!-- Quick Actions -->
      <mat-card class="quick-actions-card">
        <h3 class="section-title">Quick Actions</h3>
        <div class="quick-actions-grid">
          <button
            *ngFor="let action of quickActions"
            mat-raised-button
            color="primary"
            class="quick-action-btn"
            (click)="navigateTo(action.route)"
            [disabled]="!hasAccess(action.roles)"
          >
            <mat-icon>{{ action.icon }}</mat-icon>
            <span>{{ action.label }}</span>
          </button>
        </div>
      </mat-card>

      <!-- Recent Activity Section (Placeholder) -->
      <div class="activity-section">
        <mat-card class="activity-card">
          <h3 class="section-title">Recent Activity</h3>
          <div class="activity-placeholder">
            <mat-icon>info</mat-icon>
            <p>Recent activity tracking coming soon</p>
          </div>
        </mat-card>

        <mat-card class="announcements-card">
          <h3 class="section-title">Announcements</h3>
          <div class="activity-placeholder">
            <mat-icon>campaign</mat-icon>
            <p>Announcements feature coming soon</p>
          </div>
        </mat-card>
      </div>
    </div>

    <!-- Teacher Dashboard -->
    <div *ngIf="isTeacher()" class="teacher-dashboard">
      <mat-card class="info-card">
        <mat-icon class="large-icon">person</mat-icon>
        <h2>Teacher Dashboard</h2>
        <p>Your personalized teacher dashboard is being prepared.</p>
        <p class="info-text">
          You'll be able to view your classes, mark attendance, enter grades, and manage your schedule.
        </p>
      </mat-card>
    </div>

    <!-- Student Dashboard -->
    <div *ngIf="isStudent()" class="student-dashboard">
      <mat-card class="info-card">
        <mat-icon class="large-icon">school</mat-icon>
        <h2>Student Dashboard</h2>
        <p>Your personalized student dashboard is being prepared.</p>
        <p class="info-text">
          You'll be able to view your attendance, grades, fee status, and class schedule.
        </p>
      </mat-card>
    </div>

    <!-- Parent Dashboard -->
    <div *ngIf="isParent()" class="parent-dashboard">
      <mat-card class="info-card">
        <mat-icon class="large-icon">family_restroom</mat-icon>
        <h2>Parent Dashboard</h2>
        <p>Your personalized parent dashboard is being prepared.</p>
        <p class="info-text">
          You'll be able to view your children's attendance, grades, and fee status.
        </p>
      </mat-card>
    </div>
  </div>
</div>
