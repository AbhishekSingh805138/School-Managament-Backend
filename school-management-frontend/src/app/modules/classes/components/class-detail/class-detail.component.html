<div class="class-detail-container">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Loading class details...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="error-container">
    <mat-icon color="warn">error</mat-icon>
    <p>{{ error }}</p>
    <div class="error-actions">
      <button mat-raised-button color="primary" (click)="retry()">
        <mat-icon>refresh</mat-icon>
        Retry
      </button>
      <button mat-button (click)="goBack()">Go Back</button>
    </div>
  </div>

  <!-- Class Details -->
  <div *ngIf="classData && !isLoading && !error">
    <!-- Header -->
    <div class="detail-header">
      <button mat-icon-button (click)="goBack()" matTooltip="Back to list">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <h2>{{ classData.name }}</h2>
      <div class="header-actions">
        <button mat-raised-button color="primary" (click)="editClass()">
          <mat-icon>edit</mat-icon>
          Edit
        </button>
        <button mat-raised-button color="warn" (click)="deleteClass()">
          <mat-icon>delete</mat-icon>
          Delete
        </button>
      </div>
    </div>

    <!-- Class Information -->
    <mat-card class="info-card">
      <h3>Class Information</h3>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Grade:</span>
          <span class="value">{{ classData.grade }}</span>
        </div>
        <div class="info-item">
          <span class="label">Section:</span>
          <span class="value">{{ classData.section }}</span>
        </div>
        <div class="info-item">
          <span class="label">Capacity:</span>
          <span class="value">{{ classData.capacity }}</span>
        </div>
        <div class="info-item">
          <span class="label">Current Students:</span>
          <span class="value">{{ students.length }}</span>
        </div>
        <div class="info-item">
          <span class="label">Class Teacher:</span>
          <span class="value">{{ getTeacherName(classData) }}</span>
        </div>
      </div>
    </mat-card>

    <!-- Students List -->
    <mat-card class="students-card">
      <h3>Enrolled Students</h3>
      <mat-list *ngIf="students.length > 0">
        <mat-list-item *ngFor="let student of students">
          <mat-icon matListItemIcon>person</mat-icon>
          <div matListItemTitle>{{ student.user?.firstName }} {{ student.user?.lastName }}</div>
          <div matListItemLine>{{ student.studentId }}</div>
        </mat-list-item>
      </mat-list>
      <div *ngIf="students.length === 0" class="no-students">
        <mat-icon>info</mat-icon>
        <p>No students enrolled in this class</p>
      </div>
    </mat-card>
  </div>
</div>
